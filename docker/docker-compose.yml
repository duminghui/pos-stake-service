version: '3.6'

services:
    pos-service:
        image: pos-service
        build:
            context: .
            target: tmp
        container_name: pos-service
        hostname: pos-service
        volumes:
            - ../src:/code
            - ../run-data/wallet-data-dst:/root/.dstra
            - ../run-data/wallet-data-traw:/root/.traw
        tty: true
        depends_on:
            - pos-mysql
        networks:
          - pos-service-network

    pos-mysql:
        image: pos-mysql
        build:
          context: .
          dockerfile: Dockerfile-mysql
        container_name: pos-mysql
        hostname: pos-mysql
        ports:
            - "127.0.0.1:3306:3306"
        volumes:
            - ../run-data/pos-mysql:/var/lib/mysql
        environment:
            MYSQL_ROOT_PASSWORD: posservice
        networks:
          - pos-service-network


networks:
  pos-service-network:
    driver: bridge
